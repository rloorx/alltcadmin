<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/common.css">
    <title>매출관리화면</title>
</head>
<body>
    <div id="sales">
        <div class="wrap">
            <header class="aside-header">
                <h1><img src="./img/logo-white.png" alt="올티칭 스터디카페"></h1>
                <ul>
                    <li>
                        <a href="#"><img src="./img/icon-dashboard-white.png"><span>대시보드</span></a>
                    </li>
                    <li>
                        <a href="#"><img src="./img/icon-chart-white.png"><span>매출 관리</span></a>
                    </li>
                    <li>
                        <a href="#"><img src="./img/icon-store-white.png"><span>매장 관리</span></a>
                    </li>
                    <li>
                        <a href="#"><img src="./img/icon-group-white.png"><span>회원 관리</span></a>
                        <ul>
                            <li><a href="#"><img src="./img/icon-man-white.png">회원 관리</a></li>
                            <li><a href="#"><img src="./img/icon-enter-white.png">입·퇴실 관리</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#"><img src="./img/icon-item-white.png"><span>이용상품</span></a>
                    </li>
                    <li>
                        <a href="#"><img src="./img/icon-seat-white.png"><span>좌석 및 시설 관리</span></a>
                    </li>
                    <li>
                        <a href="#"><img src="./img/icon-event-white.png"><span>이벤트 배너 관리</span></a>
                    </li>
                    <li class="mobile">
                        <a href="#"><img src="./img/icon-my-white.png"><span>마이페이지</span></a>
                    </li>
                    <li class="mobile">
                        <a href="#"><img src="./img/icon-logout-white.png"><span>로그아웃</span></a>
                    </li>
                </ul>
            </header>
            <main class="main">
                <div class="main-header">
                    <div class="in">
                        <span>광명 직영점 (관리자)님, 환영합니다!</span>
                        <div class="my">
                            <a href="#"><img src="./img/icon-my.png"><span>마이페이지</span></a>
                        </div>
                        <div class="logout">
                            <a href="#"><img src="./img/icon-logout.png"><span>로그아웃</span></a>
                        </div>
                        <div class="mobile-header">
                            <h1><img src="./img/logo.png"></h1>
                            <div class="mobile-menu">
                                <img src="./img/icon-menu.png">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="in">
                    <h2><img src="./img/icon-chart-30px.png"><span>매출 관리</span></h2>
                    <div class="box-area">
                        <div class="box">
                            <div class="box-top">
                                <span>전체 매출 현황</span>
                                <img src="./img/icon-sell.png">
                            </div>
                            <div class="box-num">
                                <h3>4,564,000원</h3>
                            </div>
                            <div class="box-bottom">
                                <span>2025.01.02 ~ 2025.07.31</span>
                                <div class="bottom-flex">
                                    <span>일일권 : 75,000원</span>
                                    <span>시간권 :479,000원</span>
                                    <span>기간권 : 3,750,000원</span>
                                    <span>스터디룸/사물함 : 260,000원</span>
                                    <span class="red">환불금액 : 560,000원</span>
                                </div>
                            </div>
                        </div>
                        <div class="box current">
                            <div class="box-top">
                                <span>이번 달 매출</span>
                                <img src="./img/icon-sell-current.png">
                            </div>
                            <div class="box-num">
                                <h3>1,964,000원</h3>
                            </div>
                            <div class="box-bottom">
                                <span>2025.07.01 ~ 2025.07.31</span>
                                <div class="bottom-flex">
                                    <span>일일권 : 75,000원</span>
                                    <span>시간권 :479,000원</span>
                                    <span>기간권 : 3,750,000원</span>
                                    <span>스터디룸/사물함 : 260,000원</span>
                                    <span class="red">환불금액 : 560,000원</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="table-area">
                        <div class="tab-area">
                            <h3>매출 내역</h3>
                            <div class="tab-box">
                                <ul>
                                    <li>금액별</li>
                                    <li class="on">건별</li>
                                </ul>
                            </div>
                        </div>
                        <div class="search-area tab1">
                            <div class="start-date">
                                <input type="date"><span>부터</span>
                            </div>
                            <div class="finish-date">
                                <input type="date"><span>까지</span>
                            </div>
                        </div>
                        <div class="search-area tab2 on">
                            <div class="start-date">
                                <input type="date"><span>부터</span>
                            </div>
                            <div class="finish-date">
                                <input type="date"><span>까지</span>
                            </div>
                            <div class="select-area">
                                <select name="enter">
                                    <option value="default">결제수단</option>
                                    <option value="opt2">카드</option>
                                    <option value="opt3">현금</option>
                                    <option value="opt3">기타</option>
                                </select>
                            </div>
                            <div class="search-box">
                                <input type="text" placeholder="검색어를 입력해 주세요.">
                                <img src="./img/icon-search.png">
                            </div>
                            <div class="blacklist-toggle">
                                <div class="toggle-bg">
                                    <div class="toggle"></div>
                                </div>
                                <span>환불만 보기</span>
                            </div>
                        </div>
                        <div class="btn-area">
                            <button class="new-btn">
                                <img src="./img/icon-add.png"><span>매출 등록</span>
                            </button>
                            <button class="excel-btn">
                                <img src="./img/excel-img.png">
                            </button>
                        </div>
                        <div class="table-tab tab1">
                            <ul>
                                <li class="on">일별</li>
                                <li>월별</li>
                                <li>년별</li>
                            </ul>
                        </div>
                        <div class="table-layout">
                            <table class="tab1">
                                <thead>
                                    <tr>
                                        <td>날짜</td>
                                        <td>일일권</td>
                                        <td>시간권</td>
                                        <td>기간권</td>
                                        <td>스터디룸</td>
                                        <td>사물함</td>
                                        <td>환불금액</td>
                                        <td>총 매출</td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="color">
                                        <td>총계</td>
                                        <td>83,000원</td>
                                        <td>393,000원</td>
                                        <td>3,750,000원</td>
                                        <td>165,000원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>4,393,000원</td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.17</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.17</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.17</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.17</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.17</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.17</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.17</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.17</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.17</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>0원</td>
                                        <td>7,000원</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="table-layout">
                            <table class="tab2 on">
                                <thead>
                                    <tr>
                                        <td>거래일시</td>
                                        <td>상품</td>
                                        <td>이름</td>
                                        <td>연락처</td>
                                        <td>결제금액</td>
                                        <td>결제수단</td>
                                        <td>환불</td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>2025.07.01 20:00:00</td>
                                        <td>[사물함]사물함 1개월</td>
                                        <td>손예진</td>
                                        <td>010-1234-1234</td>
                                        <td>25,000원</td>
                                        <td>카드</td>
                                        <td><span class="detail-btn">환불하기</span></td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.01 20:00:00</td>
                                        <td>[사물함]사물함 1개월</td>
                                        <td>손예진</td>
                                        <td>010-1234-1234</td>
                                        <td>25,000원</td>
                                        <td>카드</td>
                                        <td><span class="detail-btn">환불하기</span></td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.01 20:00:00</td>
                                        <td>[사물함]사물함 1개월</td>
                                        <td>손예진</td>
                                        <td>010-1234-1234</td>
                                        <td>25,000원</td>
                                        <td>카드</td>
                                        <td><span class="detail-btn">환불하기</span></td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.01 20:00:00</td>
                                        <td>[사물함]사물함 1개월</td>
                                        <td>손예진</td>
                                        <td>010-1234-1234</td>
                                        <td>25,000원</td>
                                        <td>카드</td>
                                        <td><span class="detail-btn">환불하기</span></td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.01 20:00:00</td>
                                        <td>[사물함]사물함 1개월</td>
                                        <td>손예진</td>
                                        <td>010-1234-1234</td>
                                        <td>25,000원</td>
                                        <td>카드</td>
                                        <td><span class="detail-btn">환불하기</span></td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.01 20:00:00</td>
                                        <td>[사물함]사물함 1개월</td>
                                        <td>손예진</td>
                                        <td>010-1234-1234</td>
                                        <td>25,000원</td>
                                        <td>카드</td>
                                        <td><span class="detail-btn">환불하기</span></td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.01 20:00:00</td>
                                        <td>[사물함]사물함 1개월</td>
                                        <td>손예진</td>
                                        <td>010-1234-1234</td>
                                        <td>25,000원</td>
                                        <td>카드</td>
                                        <td><span class="detail-btn">환불하기</span></td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.01 20:00:00</td>
                                        <td>[사물함]사물함 1개월</td>
                                        <td>손예진</td>
                                        <td>010-1234-1234</td>
                                        <td>25,000원</td>
                                        <td>카드</td>
                                        <td><span class="detail-btn">환불하기</span></td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.01 20:00:00</td>
                                        <td>[사물함]사물함 1개월</td>
                                        <td>손예진</td>
                                        <td>010-1234-1234</td>
                                        <td>25,000원</td>
                                        <td>카드</td>
                                        <td><span class="detail-btn refund">환불완료</span></td>
                                    </tr>
                                    <tr>
                                        <td>2025.07.01 20:00:00</td>
                                        <td>[사물함]사물함 1개월</td>
                                        <td>손예진</td>
                                        <td>010-1234-1234</td>
                                        <td>25,000원</td>
                                        <td>카드</td>
                                        <td><span class="detail-btn">환불하기</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="page-area">
                            <button class="prev-btn"><img src="./img/icon-arrow-prev.png"></button>
                            <span class="on">1</span>
                            <span>2</span>
                            <span>3</span>
                            <span>4</span>
                            <span>5</span>
                            <button class="next-btn"><img src="./img/icon-arrow-next.png"></button>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <div class="modal"></div>

        <!-- 환불 처리 확인 팝업 -->
        <div class="pop-up refund pop-outside" style="display: none;">
            <div class="pop-top">
                <h2>환불 처리 확인</h2>
            </div>
            <div class="pop-bottombtn">
                <button class="cancel">취소</button>
                <button class="refund">키오스크로 환불 실행</button>
                <span>이 작업은 되돌릴 수 없습니다. 계속 진행하시겠습니까?</span>
            </div>
            
            <div class="refund-area">
                <div class="refund-box">
                    <span>이름</span>
                    <span>강예슬</span>
                </div>
                <div class="refund-box">
                    <span>상품</span>
                    <span>[자유]일일권 8시간</span>
                </div>
                <div class="refund-box">
                    <span>결제금액</span>
                    <span class="big">5,000원</span>
                </div>
                <div class="refund-box">
                    <span>결제수단</span>
                    <span>카드</span>
                </div>
                <div class="refund-box">
                    <span>결제일시</span>
                    <span>2025.07.29 10:01</span>
                </div>
                <div class="refund-box">
                    <span>승인번호</span>
                    <span>20250729100101</span>
                </div>
            </div>
            <div class="refund-price">
                <div class="refund-box">
                    <span>최종 환불 금액</span>
                    <span class="red">5,000원</span>
                </div>
            </div>
            <div class="refund-info">
                <span>환불 처리 시 해당 매출은 취소되며, 관련 이용권/상품의 상태가 변경됩니다.</span>
            </div>
        </div>


        <!-- 환불 완료 팝업 -->
        <div class="pop-up fin success pop-outside" style="display: none;">
            <div class="pop-bottombtn">
                <button class="save">확인</button>
            </div>
            
            <div class="pop-area">
                <img src="./img/check-img.png">
                <h3>키오스크에서 확인하세요!</h3>
            </div>           
        </div>

        <!-- 환불 실패 팝업 -->
        <div class="pop-up fin fail pop-outside" style="display: none;">
            <div class="pop-bottombtn">
                <button class="save">확인</button>
            </div>
            
            <div class="pop-area">
                <img src="./img/failed-img.png">
                <h3>다시 시도해 주세요.</h3>
            </div>           
        </div>

        <!-- 매출등록 팝업-->
        <div class="pop-up new pop-outside" style="display: none;">
            <div class="pop-top">
                <h2>매출 등록</h2>
                <button class="close-pop" style="display: none;"><img src=""></button>
            </div>
            <div class="pop-bottombtn">
                <button class="cancel">취소</button>
                <button class="save">등록</button>
            </div>
            
            <div class="pop-area">
                <div class="date">
                    <span>거래일시</span>
                    <input type="date">
                </div>
                <div class="type">
                    <span>상품명</span>
                    <select name="type">
                        <option value="default">선택</option>
                        <option value="item2">일일권</option>
                        <option value="item3">자유석 10시간(사용기간 30일)</option>
                        <option value="item4">자유석 30시간(사용기간 90일)</option>
                        <option value="item5">자유석 60시간(사용기간 6개월)</option>
                        <option value="item6">자유석 60시간(사용기간 1년)</option>
                        <option value="item7">고정석 1개월</option>
                        <option value="item8">고정석 2개월</option>
                        <option value="item9">고정석 3개월</option>
                        <option value="item10">고정석 6개월</option>
                        <option value="item11">고정석 12개월</option>
                        <option value="item12">스터디룸1</option>
                        <option value="item13">스터디룸2</option>
                    </select>
                </div>
                <div class="name">
                    <span>이름</span>
                    <input type="text" placeholder="예 : 자유">
                </div>
                <div class="num">
                    <span>연락처</span>
                    <input type="text" placeholder="예 : 010-1234-1234">
                </div>
                <div class="price">
                    <span>결제금액</span>
                    <input type="text" value="0">
                </div>
                <div class="item">
                    <span>결제수단</span>
                    <select name="item">
                        <option value="default">선택</option>
                        <option value="item2">네이버페이</option>
                        <option value="item3">계좌이체</option>
                        <option value="item4">기타</option>
                    </select>
                </div>
            </div>
            
        </div>



    </div>



    <script>
document.addEventListener('DOMContentLoaded', function () {
    const gnbItems = document.querySelectorAll('.aside-header > ul > li');

    function clearAllActive() {
        gnbItems.forEach(item => {
            item.classList.remove('on');
            const subLis = item.querySelectorAll('ul li');
            subLis.forEach(subLi => {
                subLi.classList.remove('on');
            });
        });
    }

    function initializeGNB() {
        const first = gnbItems[0];
        first.classList.add('on');

        const sub = first.querySelector('ul li');
        if (sub) {
            sub.classList.add('on');
        }
    }

    // GNB 클릭 이벤트
    gnbItems.forEach(item => {
        const gnbLink = item.querySelector('a');

        gnbLink.addEventListener('click', function (e) {
            e.preventDefault();

            // 상위 메뉴 초기화
            clearAllActive();

            // 본인 on 설정
            item.classList.add('on');

            const subLi = item.querySelector('ul li');
            if (subLi) {
                subLi.classList.add('on');
            }
        });

        // 하위 메뉴 클릭 이벤트
        const subItems = item.querySelectorAll('ul li');
        subItems.forEach(subLi => {
            const subLink = subLi.querySelector('a');

            subLink.addEventListener('click', function (e) {
                e.preventDefault();

                // 상위 메뉴 활성화 유지
                gnbItems.forEach(gnb => {
                    if (gnb.contains(subLi)) {
                        gnb.classList.add('on');
                    } else {
                        gnb.classList.remove('on');
                        const others = gnb.querySelectorAll('ul li');
                        others.forEach(li => {
                            li.classList.remove('on');
                        });
                    }
                });

                // 현재 하위메뉴만 on
                const siblings = subLi.parentElement.querySelectorAll('li');
                siblings.forEach(sib => {
                    sib.classList.remove('on');
                });

                subLi.classList.add('on');
            });
        });
    });

    initializeGNB();
});

        document.querySelector('.mobile-menu').addEventListener('click', function () {
            document.querySelector('.modal')?.classList.add('on');
            document.querySelector('.aside-header')?.classList.add('on');
        });
        document.querySelector('.modal').addEventListener('click', function () {
            this.classList.remove('on');
            document.querySelector('.aside-header')?.classList.remove('on');
        });

        function openPopup(popup) {
            if (!popup) return;
            const scrollTop = window.scrollY || window.pageYOffset;
            popup.style.position = 'absolute'; // 필요 시 fixed 가능
            popup.style.top = (scrollTop + 100) + 'px';
            popup.style.left = '50%';
            popup.style.transform = 'translateX(-50%)';
            popup.style.display = 'block';
        }

        document.querySelectorAll('.detail-btn').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('.pop-outside').forEach(popup => {
                    popup.style.display = 'none';
                });

                const popup = document.querySelector('.pop-up.refund');
                openPopup(popup);

                const modal = document.querySelector('.modal');
                if (modal) modal.classList.add('on');
            });
        });

        document.querySelector('.pop-up.refund button.refund').addEventListener('click', () => {
            document.querySelectorAll('.pop-outside').forEach(popup => {
                popup.style.display = 'none';
            });

            const popup = document.querySelector('.pop-up.fin.success');
            openPopup(popup);

            const modal = document.querySelector('.modal');
            if (modal) modal.classList.add('on');
        });

        document.querySelector('.new-btn').addEventListener('click', () => {
            document.querySelectorAll('.pop-outside').forEach(popup => {
                popup.style.display = 'none';
            });

            const popup = document.querySelector('.pop-up.new');
            openPopup(popup);

            const modal = document.querySelector('.modal');
            if (modal) modal.classList.add('on');
        });

        document.querySelector('.modal').addEventListener('click', function () {
            this.classList.remove('on');
            document.querySelectorAll('.pop-outside').forEach(popup => {
                popup.style.display = 'none';
            });
        });

        const pageSpans = document.querySelectorAll('.page-area > span');

        pageSpans.forEach(span => {
            span.addEventListener('click', (event) => {
                pageSpans.forEach(s => {
                    s.classList.remove('on');
                });

                event.target.classList.add('on');
            });
        });


    </script>
</body>
</html>